# Odoo Cloud Synchronizer

## Описание
Сервис позволяющий создающий бэкапы БД Odoo и загружиющий их на яндекс диск, от пользователя требуется задать параметры своей odoo и зайти в аккаунт яндекс на который требуется загружать бэкапы.

## Развёртывание
Осуществляется через docker compose, требуется:
1. Создать приложение на oauth.yandex.ru и задать redirect_url в формате `ROOT_PATH/accept_redirect`
2. Задать переменный окружения в docker-compose.yml, где\
`YANDEX_APP_ID` - идентификатор приложения yandex oauth\
`YANDEX_APP_SECRET` - секрет приложения yandex oauth\
`ROOT_PATH` - базовый URL с учётом расположения реверс прокси\
Остальный параметры можно оставить по умолчанию
3. Запустить
```
sudo docker-compose up -d
```

## Использование
Для использования доступны 3 операции:
- Подписать odoo для бэкапов
- Отписать odoo от бэкапов
- Посмотреть подписанные odoo

Перед каждой из операций просходит авторизация через аккаунт яндекс

### Подписать
Для этой операции требуется отправить GET запрос в формате
- ROOT_PATH/post_instance?url=`<адрес менеджера баз данных odoo>`&db_name=`<имя БД>`&db_password=`<пароль базы данных>`&cooldown=`<перерыв между бэкапами в днях>`

### Отписать
Для этой операции требуется отправить GET запрос в формате
- ROOT_PATH/delete_instance?url=`<адрес менеджера баз данных odoo>`&db_name=`<имя БД>`

### Посмотреть
Для этой операции требуется отправить GET запрос в формате
- ROOT_PATH/get_instance
